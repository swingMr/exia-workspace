<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--namespace空间名，对应我们定义的接口,做唯一标识的 -->
<mapper namespace="com.excellence.iamp.dao.ServiceDefinitionDao">
	<resultMap id="ServiceDefinition" type="com.excellence.iamp.vo.ServiceDefinition">  
	    <id column="service_id" property="serviceId" jdbcType="VARCHAR" />  
	    <result column="service_name" property="serviceName" jdbcType="VARCHAR" />  
	    <result column="service_cname" property="serviceCname" jdbcType="VARCHAR" />  
	    <result column="service_type" property="serviceType" jdbcType="SMALLINT" />  
	    <result column="type_name" property="typeName" jdbcType="VARCHAR" />  
	    <result column="type_id" property="typeId" jdbcType="VARCHAR" />  
	    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />  
	    <result column="status" property="status" jdbcType="SMALLINT" />  
 	    <result column="PYTHON_PATH" property="pythonPath" jdbcType="VARCHAR" />  
	    <result column="access_path" property="accessPath" jdbcType="VARCHAR" />   
	    <result column="service_input" property="serviceInput" jdbcType="VARCHAR" />    
 	    <result column="remark" property="remark" jdbcType="VARCHAR" />  
 	    <result column="access_count" property="accessCount" jdbcType="INTEGER" />  
 	    <result column="recent_access_date" property="recentAccessDate" jdbcType="TIMESTAMP" />  
	    <result column="expire_date" property="expireDate" jdbcType="TIMESTAMP" />  
	    <result column="creator_id" property="creatorId" jdbcType="VARCHAR" />  
	    <result column="creator_name" property="creatorName" jdbcType="VARCHAR" />   
	    <result column="update_date" property="updateDate" jdbcType="TIMESTAMP" />   
	</resultMap> 
	
 	<sql id="conditionFragment">  
		<where> 1=1
			<if test="serviceId !='' and serviceId != null">and service_id=#{serviceId}</if>		
			<if test="serviceName !='' and serviceName != null">and service_name like "%"#{serviceName}"%"</if>		
			<if test="serviceCname !='' and serviceCname != null">and service_cname like "%"#{serviceCname}"%"</if>		
			<if test="typeName !='' and typeName != null">and type_name=#{typeName}</if>		
			<if test="typeId !='' and typeId != null">and type_id=#{typeId}</if>		
			<if test="createDate !='' and createDate != null">and create_date=#{createDate}</if>		
			<if test="status !='' and status != null">and status=#{status}</if>		
			<if test="pythonPath !='' and pythonPath != null">and PYTHON_PATH=#{pythonPath}</if>		
			<if test="accessPath !='' and accessPath != null">and access_path=#{accessPath}</if>		
			<if test="serviceInput !='' and serviceInput != null">and service_input=#{serviceInput}</if>		
			<if test="remark !='' and remark != null">and remark=#{remark}</if>		
			<if test="accessCount !='' and accessCount != null">and access_count=#{accessCount}</if>		
			<if test="recentAccessDate !='' and recentAccessDate != null">and recent_access_date=#{recentAccessDate}</if>		
			<if test="expireDate !='' and expireDate != null">and expire_date=#{expireDate}</if>		
			<if test="creatorId !='' and creatorId != null">and creator_id=#{creatorId}</if>		
			<if test="creatorName !='' and creatorName != null">and creator_name=#{creatorName}</if>		
			<if test="updateDate !='' and updateDate != null">and update_date=#{updateDate}</if>		
		</where> 
	</sql>  
	
  	<select id="test" parameterType="java.util.Map" resultMap="ServiceDefinition">
		select * from Ia_service
		<include refid="conditionFragment" />
	</select>  
	
	
	<!-- 新增 -->
	<insert id="insert" parameterType="com.excellence.iamp.vo.ServiceDefinition">
        insert into Ia_service 
        (
        	service_id,SERVICE_NAME,SERVICE_CNAME,service_type,type_name,type_id,create_date,status,
        	python_path,access_path,service_input,remark,access_count,recent_access_date,expire_date,creator_id,creator_name,update_date
        )
        values 
        (
	        #{serviceId,jdbcType=VARCHAR},#{serviceName,jdbcType=VARCHAR}, #{serviceCname,jdbcType=VARCHAR},#{serviceType,jdbcType=SMALLINT},
	        #{typeName,jdbcType=VARCHAR},#{typeId,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP},#{status,jdbcType=SMALLINT},
	        #{pythonPath,jdbcType=VARCHAR},#{accessPath,jdbcType=VARCHAR}, #{serviceInput,jdbcType=VARCHAR},
	        #{remark,jdbcType=VARCHAR},#{accessCount,jdbcType=INTEGER}, #{recentAccessDate,jdbcType=TIMESTAMP},#{expireDate,jdbcType=TIMESTAMP},
	        #{creatorId,jdbcType=VARCHAR},#{creatorName,jdbcType=VARCHAR},#{updateDate,jdbcType=TIMESTAMP}
        )
    </insert>
    
    <!-- 更新 -->
	<update id="update" parameterType="com.excellence.iamp.vo.ServiceDefinition">
		UPDATE Ia_service SET
		SERVICE_NAME=#{serviceName,jdbcType=VARCHAR},
		SERVICE_CNAME=#{serviceCname,jdbcType=VARCHAR},
		service_type=#{serviceType,jdbcType=SMALLINT},
		type_name=#{typeName,jdbcType=VARCHAR},
		type_id=#{typeId,jdbcType=VARCHAR},
		create_date=#{createDate,jdbcType=TIMESTAMP},
		status=#{status,jdbcType=SMALLINT},
		python_path=#{pythonPath,jdbcType=VARCHAR},
		access_path=#{accessPath,jdbcType=VARCHAR},
		service_input=#{serviceInput,jdbcType=VARCHAR},
		remark=#{remark,jdbcType=VARCHAR},
		access_count=#{accessCount,jdbcType=INTEGER},
		recent_access_date=#{recentAccessDate,jdbcType=TIMESTAMP},
		expire_date=#{expireDate,jdbcType=TIMESTAMP},
		creator_id=#{creatorId,jdbcType=VARCHAR}, 
		creator_name=#{creatorName,jdbcType=VARCHAR},
		update_date=#{updateDate,jdbcType=TIMESTAMP}
		WHERE
		service_id=#{serviceId,jdbcType=VARCHAR}
	</update>
    
	<!-- 删除 -->
    <delete id="delById" parameterType="java.lang.String">
		DELETE FROM Ia_service 
		WHERE
		service_id=#{serviceId}
	</delete> 
	
	<!-- 通过ID查询对象 -->
	<select id="getServiceDefinitionById" parameterType="java.lang.String" resultMap="ServiceDefinition">
		select * from Ia_service
		where 
		service_id = #{serviceId}
	</select>
    
	<!-- 查询list -->
	<select id="getList" parameterType="java.util.Map" resultMap="ServiceDefinition">
		select * from Ia_service
		<include refid="conditionFragment" />
	</select>
	<!-- 统计总数 -->
	<select id="countByCondition" resultType="java.lang.Integer">
		select count(1) from Ia_service
		<include refid="conditionFragment" />
	</select>
</mapper>